"use strict";(function(n,t,i){function r(){u&&console&&console.log&&console.log.apply(console,["LCSwitcher:"].concat(Array.prototype.slice.call(arguments)))}function f(){var n=(i.documentElement.lang||"").trim();return n?n.toLowerCase().split("-")[0]:""}function s(n){return{en:"gb",sk:"sk",cz:"cz",de:"de",fr:"fr",es:"es",it:"it",ru:"ru",pl:"pl",hu:"hu",nl:"nl",pt:"pt"}[n.toLowerCase()]||n.toLowerCase()}function e(n){var t=arguments.length<=1||arguments[1]===undefined?"":arguments[1],i=s(n);return'<span class="lcs-flag lcs-flag-'+i+" "+t+'"><\/span>'}function o(n){var t=i.getElementById("a11y-live");t||(t=i.createElement("div"),t.id="a11y-live",t.className="sr-only",t.setAttribute("aria-live","polite"),i.body.appendChild(t),r("Vytvorený a11y-live región"));t.textContent="";setTimeout(function(){t.textContent=n},10);r("Oznámené:",n)}function c(t,i){var o=i.language||f()||"sk",s=i.languageChangeUrl||"/Home/ChangeLanguage?code={CODE}",u;r("Inicializácia jazykového prepínača (onlyFlags mód)",{currentLang:o,urlTemplate:s});t.empty().addClass("switch-flags-only");u=n('<div class="flags-container" role="tablist"><\/div>');i.languages.forEach(function(t){var i=t.code,h=t.label,f=i.toLowerCase()===o.toLowerCase(),c=s.replace("{CODE}",encodeURIComponent(i)),l=e(i),a=n('\n                <a href="'+c+'" \n                   class="flag-link '+(f?"active":"")+'" \n                   role="tab"\n                   aria-selected="'+f+'"\n                   title="'+h+'"\n                   data-lang="'+i+'">\n                    '+l+"\n                <\/a>\n            ");u.append(a);r("Pridaná vlajka:",{code:i,label:h,href:c,isActive:f})});t.append(u);u.on("click.switch-language",".flag-link",function(){var t=n(this).data("lang");r("OnlyFlags: Navigácia na jazyk",t)});u.on("keydown.switch-language",".flag-link",function(n){var t=u.find(".flag-link"),i=t.index(this),r,f;switch(n.key){case"ArrowLeft":case"ArrowUp":n.preventDefault();r=i>0?i-1:t.length-1;t.eq(r).focus();break;case"ArrowRight":case"ArrowDown":n.preventDefault();f=i<t.length-1?i+1:0;t.eq(f).focus();break;case"Enter":case" ":n.preventDefault();this.click()}});r("OnlyFlags jazykový prepínač inicializovaný s",i.languages.length,"vlajkami")}function l(t,i){var l=i.language||f()||"sk",d=i.languageChangeUrl||"/Home/ChangeLanguage?code={CODE}",y=i.languageLabel||"",u=t.find(".current"),c=t.find('[role="listbox"]'),v,w,g,b,k;r("Inicializácia jazykového prepínača",{currentLang:l,urlTemplate:d,labelText:y});var a=i.languages.find(function(n){return n.code.toLowerCase()===l.toLowerCase()}),o=a?a.code:l,p=a?a.label:l.toUpperCase();r("Aktuálny jazyk nastavený na:",{displayLang:o,displayLabel:p});v=u.find(".sr-only").detach();w=u.find(".arrow").detach();u.empty();g=e(o);b=y?y+" "+o.toUpperCase():o.toUpperCase();u.append(g);u.append('<span class="text">'+b+"<\/span>");v.length?(v.text("Current language: "+p),u.append(v)):u.append('<span class="sr-only">Current language: '+p+"<\/span>");w.length?u.append(w):u.append('\n                <em class="arrow">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" aria-hidden="true" focusable="false">\n                        <title>Open language options<\/title>\n                        <g fill="currentColor"><path d="M5 8l4 4 4-4z"><\/path><\/g>\n                    <\/svg>\n                <\/em>\n            ');r("Language UI štruktúra vytvorená:",{displayText:b,flagClass:"lcs-flag-"+s(o)});c.length&&(c.empty(),i.languages.forEach(function(t){var i=t.code,f=t.label,h="opt-lang-"+i,u=i.toLowerCase()===o.toLowerCase(),s=d.replace("{CODE}",encodeURIComponent(i)),l=e(i),a=n('\n          <li id="'+h+'" role="option" data-lang="'+i+'" aria-selected="'+u+'" class="'+(u?"selected":"")+'">\n            <a href="'+s+'" class="lang-link">\n              '+l+'\n              <span class="text">'+f+"<\/span>\n            <\/a>\n          <\/li>\n        ");c.append(a);r("Pridaná jazyková možnosť:",{code:i,label:f,href:s,isSelected:u})}));k=c.find('[role="option"]').attr("tabindex","-1");r("Jazykový prepínač inicializovaný s",k.length,"položkami a vlajkami");h(t,u,c,k,"language")}function a(t,i){var f=i.currency||"eur",l=i.currencyLabel||"",s=i.currencyChangeUrl||"",u=t.find(".current"),e=t.find('[role="listbox"]'),c,a,v,o;r("Inicializácia menového prepínača",{currentCurrency:f,labelText:l,urlTemplate:s});c=u.find(".sr-only").detach();a=u.find(".arrow").detach();u.empty();v=l?l+" "+f.toUpperCase():f.toUpperCase();u.append('<span class="currency-text" aria-hidden="true">'+v+"<\/span>");c.length?(c.text("Current currency: "+f.toUpperCase()),u.append(c)):u.append('<span class="sr-only">Current currency: '+f.toUpperCase()+"<\/span>");a.length?u.append(a):u.append('\n                <em class="arrow">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" aria-hidden="true" focusable="false">\n                        <title>Open currency options<\/title>\n                        <g fill="currentColor"><path d="M5 8l4 4 4-4z"><\/path><\/g>\n                    <\/svg>\n                <\/em>\n            ');r("Currency UI štruktúra vytvorená:",{displayText:v});i.currencies&&Array.isArray(i.currencies)&&e.length&&(e.empty(),i.currencies.forEach(function(t){var i=t.code,u=t.label,a="opt-curr-"+i,o=i.toLowerCase()===f.toLowerCase(),h=undefined,c,l;s?(c=s.replace("{CODE}",encodeURIComponent(i)),h='\n                        <a href="'+c+'" class="currency-link">\n                            <span class="text">'+(u||i.toUpperCase())+"<\/span>\n                        <\/a>\n                    "):h='\n                        <span class="currency-link">\n                            <span class="text">'+(u||i.toUpperCase())+"<\/span>\n                        <\/span>\n                    ";l=n('\n                    <li id="'+a+'" role="option" data-currency="'+i+'" aria-selected="'+o+'" class="'+(o?"selected":"")+'">\n                        '+h+"\n                    <\/li>\n                ");e.append(l);r("Pridaná menová možnosť:",{code:i,label:u,isSelected:o,hasUrl:!!s})}));o=e.find('[role="option"]').attr("tabindex","-1");o.removeClass("selected").attr("aria-selected","false");o.filter('[data-currency="'+f+'"]').addClass("selected").attr("aria-selected","true");r("Menový prepínač inicializovaný s",o.length,"položkami");h(t,u,e,o,"currency")}function h(u,f,e,s,h){function w(n){if(f.attr("aria-expanded",n?"true":"false"),n){var t=s.filter(".selected").first();t.length&&t.attr("id")&&e.attr("aria-activedescendant",t.attr("id"))}else e.removeAttr("aria-activedescendant")}function a(){r("Otváram dropdown pre",h);n(".switch.show-options").not(u).each(function(){c(n(this))});u.addClass("show-options");w(!0);t.matchMedia("(max-width: 768px)").matches&&b();setTimeout(function(){return u.addClass("anim-options")},50);setTimeout(function(){return u.addClass("show-shadow")},200);setTimeout(function(){var n=s.filter(".selected").first(),t=n.length?n:s.first();r("Nastavujem focus na:",t.text().trim());t.focus();r("Dropdown otvorený, fokus na:",n.length?"vybraný":"prvý")},100)}function c(){var n=arguments.length<=0||arguments[0]===undefined?u:arguments[0],t;r("Zatváram dropdown pre",h);n.removeClass("anim-options show-shadow");t=n.find(".current");t.attr("aria-expanded","false");n.find('[role="listbox"]').removeAttr("aria-activedescendant");y();setTimeout(function(){return n.removeClass("show-options")},600)}function b(){n(".switch-mobile-overlay").length===0&&function(){var t=n('<div class="switch-mobile-overlay"><\/div>');n("body").append(t);t.on("click.switch-overlay",function(n){n.preventDefault();n.stopPropagation();r("Klik na mobilný overlay - zatváram dropdown");c()});setTimeout(function(){return t.addClass("active")},10);r("Vytvorený mobilný overlay")}()}function y(){var t=n(".switch-mobile-overlay");t.length>0&&(t.removeClass("active"),setTimeout(function(){t.off("click.switch-overlay").remove();r("Odstránený mobilný overlay")},300))}function p(n){r("Zmena zobrazenia na:",n.matches?"mobilné":"desktop");n.matches||y()}var v,l;f.off("click.switch-"+h).on("click.switch-"+h,function(t){if(n(this).data("keyboardTriggered")){r("Ignorujem click - bol spustený klávesnicou");return}t.preventDefault();t.stopImmediatePropagation();r("Klik na button pre",h);setTimeout(function(){u.hasClass("show-options")?(r("Zatváram dropdown"),c()):(r("Otváram dropdown"),a())},10)});f.on("keydown.switch-"+h,function(t){var i=this;(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),n(this).data("keyboardTriggered",!0),setTimeout(function(){n(i).removeData("keyboardTriggered")},50),u.hasClass("show-options")?c():a());(t.key==="ArrowDown"||t.key==="ArrowUp")&&(t.preventDefault(),t.stopPropagation(),a());t.key==="Escape"&&(t.preventDefault(),t.stopPropagation(),c())});s.on("click.switch-"+h,function(i){var l,a,u,e,y;if(h==="language")l=n(this).find("a.lang-link"),l.length&&(r("Klik na jazykový link:",l.attr("href")),o("Navigating to "+l.text().trim()));else if(a=n(this).find("a.currency-link"),a.length)r("Klik na currency link:",a.attr("href")),o("Navigating to currency "+a.text().trim());else{if(i.stopPropagation(),i.preventDefault(),u=n(this).data("currency"),u){r("Mena zmenená na:",u);e=f.find(".currency-text");e.length||(e=f.find('span[aria-hidden="true"]'));var p=e.text(),w=p.includes(":"),v=u.toUpperCase();if(w&&(y=p.match(/^([^:]+:)\s*/),y&&(v=y[1]+" "+v)),e.text(v),s.removeClass("selected").attr("aria-selected","false"),n(this).addClass("selected").attr("aria-selected","true"),o("Currency changed to "+u.toUpperCase()),typeof t.onCurrencyChange=="function")t.onCurrencyChange(u)}c();f.focus()}});s.on("keydown.switch-"+h,function(i){var b=this,u=s,y=u.index(this),p,o,w,l,a,v;if(i.key==="Escape"){i.preventDefault();i.stopPropagation();c();f.focus();return}if(i.key==="ArrowDown"){i.preventDefault();i.stopPropagation();p=(y+1)%u.length;o=u.eq(p).focus();o.attr("id")&&e.attr("aria-activedescendant",o.attr("id"));return}if(i.key==="ArrowUp"){i.preventDefault();i.stopPropagation();w=(y-1+u.length)%u.length;l=u.eq(w).focus();l.attr("id")&&e.attr("aria-activedescendant",l.attr("id"));return}if(i.key==="Home"){i.preventDefault();i.stopPropagation();a=u.first().focus();a.attr("id")&&e.attr("aria-activedescendant",a.attr("id"));return}if(i.key==="End"){i.preventDefault();i.stopPropagation();v=u.last().focus();v.attr("id")&&e.attr("aria-activedescendant",v.attr("id"));return}if(i.key==="Enter"||i.key===" "){i.preventDefault();i.stopPropagation();i.stopImmediatePropagation();h==="language"?function(){var i=n(b).find("a.lang-link");i.length&&(r("Jazyk vybraný cez klávesnicu:",i.attr("href")),setTimeout(function(){t.location.href=i.attr("href")},100))}():n(this).trigger("click");return}});v=function(n){if(!u[0].contains(n.target)&&u.hasClass("show-options")){if(n.isTrusted===!1||n.clientX===0&&n.clientY===0){r("Ignorujem keyboard-triggered click event");return}r("Klik mimo dropdown - zatváram");c()}};u.data("globalClickHandler",v);i.addEventListener("click",v,!0);n(i).on("keydown.switch-"+h,function(n){n.key==="Escape"&&u.hasClass("show-options")&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),r("ESC klávesa - zatváram iba dropdown, nie modálne okno"),c())});l=t.matchMedia("(max-width: 768px)");l.addListener?l.addListener(p):l.addEventListener&&l.addEventListener("change",p)}var u=!1,v={init:function(t){var y,s,p,h,e,v,o;if(this.destroy(),t=t||{},t.disabledPlugin===!0){r("LCSwitcher: Plugin je vypnutý cez disabledPlugin: true");n(".switch.lang, .switch.currency").hide();n(".lc-switches, .lc-switch-container, .lang-currency-switches").hide();n('[class*="switch"][class*="lang"], [class*="switch"][class*="currency"]').hide();n('[class*="lang"][class*="switch"], [class*="currency"][class*="switch"]').hide();r("LCSwitcher: Všetky switcher elementy skryté");return}u=!!t.debug;r("LCSwitcher inicializácia začatá",t);y=t.languages||["cz|Česky","en|English"];s=y.map(function(n){return typeof n=="object"&&n.code!==undefined?n:String(n)}).map(function(n){return typeof n=="object"?n:n.trim()}).filter(Boolean).map(function(n){if(typeof n=="object")return n;var t=n.split("|"),i=(t[0]||"").trim(),r=(t[1]||i).trim();return{code:i,label:r}}).filter(function(n){return n.code});r("Spracované jazyky:",s);p=t.currencies||["czk|CZK Kč","eur|EUR €"];h=p.map(function(n){return typeof n=="object"&&n.code!==undefined?n:String(n)}).map(function(n){return typeof n=="object"?n:n.trim()}).filter(Boolean).map(function(n){if(typeof n=="object")return n;var t=n.split("|"),i=(t[0]||"").trim(),r=(t[1]||i).trim();return{code:i,label:r}}).filter(function(n){return n.code!==undefined});r("Spracované meny:",h);e=t.language||f()||"sk";r("Aktuálny jazyk určený ako:",e);v=n(".switch.lang");r("Nájdené jazykové prepínače:",v.length);v.each(function(){var i={language:e,languages:s,languageChangeUrl:t.languageChangeUrl,languageLabel:t.languageLabel};t.onlyFlags===!0?c(n(this),i):l(n(this),i)});t.allowCurrencyChange!==!1?(o=n(".switch.currency"),r("Nájdené menové prepínače:",o.length),o.show(),o.each(function(){a(n(this),{currency:t.currency,currencies:h,allowCurrencyChange:t.allowCurrencyChange,currencyLabel:t.currencyLabel,currencyChangeUrl:t.currencyChangeUrl})})):(n(".switch.currency").hide(),r("Menové prepínače skryté kvôli allowCurrencyChange: false"));e&&(i.documentElement.setAttribute("data-lang",e),r("Nastavený data-lang atribút na:",e));t.currency&&(i.documentElement.setAttribute("data-currency",t.currency),r("Nastavený data-currency atribút na:",t.currency));r("LCSwitcher inicializácia dokončená")},enableDebug:function(){u=!0;r("Debug režim zapnutý")},disableDebug:function(){u=!1},destroy:function(){r("Odstraňovanie LCSwitcher eventov");n(".switch").off(".switch-language .switch-currency");n(i).off(".switch-language .switch-currency");n(t).off(".switch-language .switch-currency");n(".switch").each(function(){var t=n(this).data("globalClickHandler");t&&(i.removeEventListener("click",t,!0),n(this).removeData("globalClickHandler"))});n(".switch .options").removeClass("dropdown-top dropdown-right dropdown-left");n(".switch.show-options").removeClass("show-options anim-options show-shadow");n(".switch.currency").show();n(".switch.lang").show();r("LCSwitcher eventy odstránené")}};t.LCSwitcher=v})(jQuery,window,document);